{{- define "main" -}}
<main id="main-content" class="article-main">
    <div class="reading-progress" id="reading-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Reading progress">
        <div class="reading-progress-bar" id="reading-progress-bar"></div>
    </div>
    <article class="article-container" aria-labelledby="article-title">
        <header class="article-header section-container">
            <p class="blog-card-meta">{{ .Date.Format "January 2, 2006" }}{{ with .Params.readTime }} · {{ . }}{{ end }}</p>
            <h1 class="article-title" id="article-title">{{ .Title }}</h1>
            {{- if .Params.excerpt -}}
            <p class="article-subtitle">{{ .Params.excerpt }}</p>
            {{- else if .Description -}}
            <p class="article-subtitle">{{ .Description }}</p>
            {{- end -}}
        </header>

        {{- if .Params.featuredImage -}}
        <div class="article-hero-image section-container">
            <figure class="hero-figure">
                <img 
                    src="{{ .Params.featuredImage | relURL }}" 
                    alt="{{ .Params.featuredAlt | default .Title }}"
                    loading="eager"
                    decoding="async"
                    class="hero-image"
                >
                {{- if .Params.imageCredit -}}
                <figcaption class="image-credit">{{ .Params.imageCredit }}</figcaption>
                {{- end -}}
            </figure>
        </div>
        {{- end -}}

        <div class="article-body section-container">
            {{ .Content }}

            <div class="article-cta">
                <a class="cta-button primary" href="{{ .Site.BaseURL }}" data-magnetic>
                    <span class="button-text">Back to the homepage</span>
                    <div class="button-arrow">
                        <svg viewBox="0 0 24 24">
                            <path d="M7 17L17 7M17 7H7M17 7V17"/>
                        </svg>
                    </div>
                </a>
                <a class="cta-button secondary" href="/blog/" data-magnetic>
                    <span class="button-text">Explore more posts</span>
                    <div class="button-icon">✨</div>
                </a>
            </div>

            {{- if .Site.Params.support.kofi -}}
            <div class="article-support">
                <p class="support-note">
                    If this helped, you can support my writing with a coffee on <a href="{{ .Site.Params.support.kofi }}" class="support-link" target="_blank" rel="noopener noreferrer" data-cta="kofi">Ko‑fi <span aria-hidden="true">☕</span></a>.
                </p>
            </div>
            {{- end -}}

            {{- if .Site.Params.giscus -}}
            <div class="article-comments">
                <h2 class="comments-heading">Comments</h2>
                <script src="https://giscus.app/client.js"
                        data-repo="{{ .Site.Params.giscus.repo }}"
                        data-repo-id="{{ .Site.Params.giscus.repoId }}"
                        data-category="{{ .Site.Params.giscus.category }}"
                        data-category-id="{{ .Site.Params.giscus.categoryId }}"
                        data-mapping="{{ .Site.Params.giscus.mapping | default "pathname" }}"
                        data-strict="{{ .Site.Params.giscus.strict | default "0" }}"
                        data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled | default "1" }}"
                        data-emit-metadata="{{ .Site.Params.giscus.emitMetadata | default "0" }}"
                        data-input-position="{{ .Site.Params.giscus.inputPosition | default "bottom" }}"
                        data-theme="{{ .Site.Params.giscus.theme | default "dark" }}"
                        data-lang="{{ .Site.Params.giscus.lang | default "en" }}"
                        crossorigin="anonymous"
                        async>
                </script>
            </div>
            {{- end -}}
        </div>
    </article>
</main>

<footer class="contact-section">
    <div class="section-container">
    </div>
</footer>
{{- end -}}

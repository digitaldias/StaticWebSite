{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "{{ .Site.Title }}",
  "description": "{{ .Site.Params.description }}",
  "home_page_url": "{{ .Site.BaseURL }}",
  "feed_url": "{{ .Site.BaseURL }}index.json",
  "author": {
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}"
  },
  "items": [
    {{- $blogSection := .Site.GetPage "section" "blog" -}}
    {{- $posts := first 20 ($blogSection.Pages.ByDate.Reverse) -}}
    {{- range $index, $post := $posts -}}
    {{- if $index }},{{- end }}
    {
      "id": "{{ $post.Permalink }}",
      "url": "{{ $post.Permalink }}",
      "title": {{ $post.Title | jsonify }},
      "content_html": {{ $post.Content | jsonify }},
      "summary": {{ ($post.Description | default $post.Summary) | jsonify }},
      "date_published": "{{ $post.Date.Format "2006-01-02T15:04:05Z07:00" }}",
      {{- if $post.Lastmod -}}
      "date_modified": "{{ $post.Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
      {{- end -}}
      "author": {
        "name": {{ ($post.Params.author | default $.Site.Params.author) | jsonify }}
      },
      {{- if $post.Params.featuredImage -}}
      "image": "{{ $post.Params.featuredImage | absURL }}",
      {{- end -}}
      "tags": [{{ range $i, $tag := $post.Params.tags }}{{ if $i }}, {{ end }}{{ $tag | jsonify }}{{ end }}]
    }
    {{- end -}}
  ]
}

